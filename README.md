# **ARCHIPELAGO HTML/CSS スタイルガイド**

# 文書構成

https://github.com/arcplg/html-css-style-guide

- **スタイルガイド概要（本ファイル）**
    - 前段と全体的サマリー
- **[HTMLガイド](README_HTML.md)**
    - HTML側の記述、SEOの観点から見た構造
- **[CSSガイド](README_CSS.md)**
    - CSS側の記述
- **[開発環境ガイド](README_OPS.md)**
    - エディターの設定、開発環境のアーキテクチャ
- **[コーディング設定シート](https://docs.google.com/spreadsheets/d/16MCcsQESgk16r9Nh8RwrPe3L3d1ahOWRtP2I8nQHuqw/edit#gid=1764403400)**
    - 依頼する、作業する前に確認するチェックシート

# 前段

本ドキュメントは、HTML/CSSをコーディングする際の、準拠するガイドと、必ず指示をしてもらう箇所を定義します。
みなさんでこのガイドを徹底することで、多人数での作業や保守メンテナンスの効率化を向上します。
随時、みなさんで修正していきましよう！


# 方針

* プロジェクトごとにコーディング設定書を作成し、PM/デザイナー/コーダー間で共有する
  * 対応ブラウザ、レイアウト構造、レスポンシブル設定、フォントなど
* 保守に強い、後から作業した人がわかりやすいコーディングを意識する
* HTMLとCSSの役割をしっかりと分ける（セマンティック）
* SEOに強いコーディングを意識する
* ツール・プラグインで統一できることは極力個人のやりかたでやらない
  * 例えば、インデント

* 開発要件ごとに、テンプレートを作成する予定です。
  * 静的HTML/CSSのみ（本リポジトリに入っています。）
  * Wordpress
  * Vue/Nuxt.js

# おさえておきたいトピック
詳細はそれぞれの別途ファイルを参照

## [開発/環境トピック](README_OPS.md)
* エディターは`Visual Studio Code`(VSC)を使用する
  * VSC設定ファイルを共通でコミットしたい
  * 利用人口も多く、個人的にコーディングで一番良いエディターだと思います。
  * クラウド版もベータリリースされており、今後開発環境とのセットになると考えられる
* 作業開始時はできる限りテンプレート/開発環境から開始する（後述）
* フォーマット調整はできる限り手動ではなくVSCのオートフォーマットを利用する
  * インデントはスペース2つ
  * ブラウザ固有のベンダープレフィックスは手で書かず、自動で記述してくれる開発環境を利用する
* lintを必ず通し、エラーがない状態でコミットする（VSCで自動化、開発環境ガイド参照）
* スマホなどのデバイスの実機確認を必ず行う
  * 時間がない場合、クラウドの[Browser Stack](https://www.browserstack.com/)（契約済）を利用する

## [HTML](README_HTML.md)/[CSS](README_CSS.md)トピック
  * `セマンティック`に記述する（詳細後述）
  * `<h1>`タグはページ内で1つにし、原則トップページではロゴアイコン周りやサイト名に使い、他のページはヘッダータイトルに設定する
  * ヘッダーの順番 h1 h2 h3 ... は守ってください順番の話
  * metaセクションを設定する
    * viewportを必ず指定する
      * `<meta name="viewport" content="width=device-width, initial-scale=1">`
      * meta keywords は要らない
    * OGP（Open Graph Protocol）は必ず指定する。og:typeはTopと配下で切り替えてください。
      ```html
      <meta property="og:title" content="ページのタイトル">
      <meta property="og:type" content="website"> // top page
      <meta property="og:type" content="article"> // 配下ページ
      <meta property="og:url" content="ページのsull URL">
      <meta property="og:image" content="サムネイル画像のfull URL">
      ```
  * `<head>`内では CSSファイルの後にJSファイルをincludeする
  * HTMLのidは極力使わない（CSSセレクターで#idは禁止、jsで使う場合はOK）
  * ベクトルにできる画像はなるべくSVGで保存する
  * 画像にalt属性を入れる（背景画像のような意味のない画像は対象外）
  * アイコンはなるべくWebIconFontを利用する（デザイナと相談、わざわざデザインしなくてもいい場合）
  * CSSのセレクターは原則1階層にする。そのため、BEM（の改良、後述）で記述する
    ```CSS
      .menu .button {} // NG
      .menu_button {} // OK
    ```
  * CSSの!importantは原則禁止
  * タグ（要素セレクタ）はCSSで直接使わず、必ずクラスを付与する
  * ボックスモデルは原則`box-sizing: border-box`（widthはpaddingを含む設定）にする
  * CSSキャッシュの対策
    * できる限り、お客さま（ユーザー）に毎回ブラウザをスーパーリロードする必要がないように、CSSファイル名の後ろに一意のパラメータを付与する ex.`file.css?v=202010090954`
    * todo: Webpackで自動化構築中


# プロジェクトごとの仕様確認
下記これらをまとめたのがコーディング設定シートとなります。

## ターゲット環境
コーディング前にWindows環境、Machintosh環境、スマートフォンなど対応が必要なブラウザ、端末を明確にします。
端末ごとのデフォルトフォントに気をつけてください（後述）

対応ブラウザが増えるほど、コストがかかります。
特に`Microsoft Internet Explorer 11` は特別なコストがかかるため、できる限り対応ブラウザは少なく、もしくは、対応しても最低限の検証ですむように、顧客と相談してください。

* 標準ターゲット（2020/10/08現在）
  * Windows環境
    * Microsoft Internet Explorer 11
    * Microsoft Edge 最新バージョン
    * Google Chrome 最新バージョン
    * Mozilla Firefox 最新バージョン
  * Macintosh環境
    * Safari 最新バージョン
    * Google Chrome 最新バージョン
    * Mozilla Firefox 最新バージョン
  * iOS環境
    * iOS 12以降の Safari 最新バージョン
    * iOS 12以降の Google Chrome最新版
  * Android環境
    * Andoroid ver.6.0以上の Google Chrome最新版


## レスポンシブル / ブレークポイント仕様
ブレークポイントとブレークポイント間の幅指定を定義します。
注意：レスポンシブルと幅が可変かどうかは別の話であり、別々に決めなくてはいけません。

### 画面サイズ参考
* XPERIA : 360 x 640
* iPhone 678 : 375 x 667
* iPhone XR/XS : 414 x 896
* iPad/mini : 768 x 1024
* iPad Air : 834 x 1112
* iPad Pro 11" : 834 x 1194
* iPad Pro 12.9" : 1024 x 1366

### ブレークポイント標準設定(2020/10/08現在)
顧客から指定がない場合の推奨ですが、場合に応じて、下記の`この部分`の変更をしてください。

* ブレークポイント1つ2モードの場合(ほとんどの場合これ)
  * ブレークポイント
    * モバイル `768px` まで : PC `769px` から
  * 幅仕様
    * モバイル `可変幅100%`
    * PC以下の組合わせ
      a) `1100px` 完全固定幅（それ以下は横スクロールバー表示）
		  a+) `xxxpx` min-width 以下は固定、それ以上は可変幅
		  a+) `xxxpx` max-width まで可変幅、それ以上は固定
* ブレークポイント2つ3モードの場合
  * ブレークポイント
    * モバイル `414px` まで : タブレット `415px` から `896px` まで : PC `897px` から
  * 幅仕様
    * モバイル `可変幅100%` : タブレット `可変幅100%` : PC `固定幅1100px`(上記参照)

固定幅の1100pxはプロジェクトごとの指定。変動の場合もあり
スマホの最小サイズは360pxとします。


## フォント
* 全体で利用するフォントリスト(+文字の太さバリエーション)を頂いてください
* 外部Webフォントを指定する場合、なるべく `google font` を利用するようにお願いしてください（部分ロードができるため）
  利用例
  ```
  https://fonts.googleapis.com/css?family=Noto+Sans+JP:400,500,700&display=swap
  ```
* 指示ならばしょうがないのですが、外部の日本語Webフォントはサイズが大きいのでなるべく使わない、使っても一つぐらいがベターです


### フォント標準設定(2020/10/08現在)
特に指定がない場合、下記の設定が無難です。

```CSS
body {
  font-family:
    "Helvetica Neue",
    Arial,
    "Hiragino Kaku Gothic ProN",
    "Hiragino Sans",
    Meiryo,
    sans-serif;
}
```
游ゴシックを使いたい場合は、WindowsのChromeでフォントが細くなってしまう問題があり、対策をしなくてはなりません。一例として以下のような、Windows書体名に Medium を付ける方法がありますが、プロジェクトによって検討をしてください。
```CSS

body {
  font-family:
    "游ゴシック体",
    YuGothic,
    "游ゴシック Medium",
    "Yu Gothic Medium",
    "游ゴシック",
    "Yu Gothic",
    "メイリオ",
    sans-serif;
}
```



## Webアイコンフォント
* Webサイトで使うアイコンは、可能ならばなるべく、画像ではなくWebアイコンフォントを利用してください。
* Webアイコンフォントを使う場合は、なるべく一つのセットから選ぶようにしてください
* さらに可能ならば、使うアイコンのみを読み込むようにしてください


# デザインカンプ (Design Comprehensive Layout)
上記のプロジェクト仕様を共有した上でデザイン制作をお願いしてください。
またできるかぎり、AdobeXD での制作をお願いしてください。

## 画像コンバートに関して
* PMからデザイナーさんへのお願い事項
  * 画像化する部分は明確に指定してください。
  * 幾何学的（写真ではない）画像でベクトル化できるものはベクトル画像にしてください
   * 画像化を想定している文字も、フォントのままではなく、ベクトル化できるものはベクトル化してください。（デザインファイルを開いたり、なにか操作をしたときに、フォントが変更される場合があるので）

## その他
* PMさん、もしくはデザイナーさんへのお願い事項
  * 外部フォント含めて、フォントを指定する際はプロジェクト全体で使うフォントリストを作ってください
  * レスポンシブルのテーブルデザインは、例えば、横スクロールか、縦並びかで大きく作りが変わるので、事前に確定してください。


# セマンテックWebについて

HTMLとCSSの役割をしっかりと分ける概念を意識するようにしてください


### セマンティックなclass名をつける

見た目や振る舞いからではなく、目的や役割に基づいて名前をつけます。
要は例えば、red-box(赤) や left-box(左エリア) のようなclass名をつけず、post-box(郵便箱)、image-box(画像エリア)などの目的や役割に基づいてclass名をつけてください。


```html
<!-- 悪い例（見た目や振る舞いでclass名をつけている） -->
  <div class="red pull-left"></div>
  <div class="grid row"></div>
  <a class="color-blue"></a>
```

```html
<!-- 良い例（目的や役割に基づいてclass名をつけている） -->
  <div class="alert-box"></div>
  <div class="basket"></div>
  <a class="color-primary"></div>
```

例えば bootstrap
> [お前ら今すぐそのCSSフレームワーク使うのやめろ!](https://qiita.com/isuke/items/e132669d54523c934b96)
> 
>`col-lg-6`はLarge deviceで幅が6/12という意味です。
「Large deviceで幅が6/12」というのは文書構造でしょうか?
いいえ、スタイルですね。
**これがCSSフレームワークを使う最大の弊害**です。
スタイル定義がHTMLに侵食してしまうのです。
本来、文書構造に変更が生じたときはHTMLのみ、スタイルの変更が生じたときはCSSのみを変更するのが理想です。
ですが、上記の場合例えば「幅を7/12にしたい」というスタイルの変更が生じたときにHTMLを編集しなくてはなりません。
文書構造とスタイルを分離するためにスタイルシートが生まれたのにこれでは本末転倒ですね。


ただし、最初からbootstarpを使う場合は、そのまま利用してかまいません。

### マルチクラスのデメリット

HTMLではクラス属性を複数記述することが出来ますが、マルチクラスを前提として、複数のセレクタの組み合わせによって、1つの状態を表現するのはなるべく控えてください。

例えば bootstrap
> [良いCSSとは](https://qiita.com/horikowa/items/7e6eb7c4bbb422241d9d)
class="btn btn-primary btn-lg btn-block"
各クラスをセレクタとして、スタイル郡がバラバラに宣言されています。
...
共通するスタイルをまとめ、CSSだけを見れば見通しがよくなり、変更も容易になった感じる方もいるかもしれません。
ただし、この手法は**CSSで行うべきことをHTMLで行ってる**に過ぎません。
...
クラス属性を複数設定すること自体を否定しているわけではありません。
いわゆるユーティリティクラスと呼ばれるようなクラスを付けざるを得ない状況もあるでしょう。
...
しかしマルチクラスを前提として、複数のセレクタの組み合わせによって、1つの状態を表現するのはやめるべきです。
たった1つのボタンを表現するために、コード以外に以下の様なことを覚えるのは苦痛でしかありません。
